
{% macro brief_entries( title, kind, node ) %}
{%- set entries = list( node.children | filter_kind( kind ) ) %}
{%- if entries %}
<h2>{{title}}</h2>
{%- for n in entries %}
<h3>{{n.name}}</h3>
<div class="mx-3">
{{ n.html }}
</div>
{%- endfor %}
{%- endif %}
{% endmacro %}

{% macro brief_groups( node ) %}
{%- set entries = list( node.children | filter_kind( 'group' ) ) %}
{%- for group in entries %}
<h2>{{group.name}}</h2>
{%- for n in group.children %}
<h3>{{n.name}}</h3>
<div class="mx-3">
{{ n.html }}
</div>
{%- endfor %}
{%- endfor %}
{% endmacro %}

{% macro toc_entries( title, kind, node ) %}
{%- set entries = list( node.children | filter_kind( kind ) ) %}
{%- if entries %}
<div class="badge rounded-pill bg-light text-dark">{{title}}</div>
{%- for n in node.children | filter_kind( kind ) %}
    <a class="nav-link" href="/{{'/'.join(parents + (node.name,) )}}/{{n.name}}.html">
        {{n.name}}
    </a>
{%- endfor %}
{%- endif %}
{% endmacro %}

{% macro toc_groups( node ) %}
{%- set entries = list( node.children | filter_kind( 'group' ) ) %}
{%- for group in entries %}
<div class="badge rounded-pill bg-light text-dark">{{group.name}}</div>
{%- for n in group.children %}
    <a class="nav-link" href="/{{'/'.join(parents + (node.name,) )}}/{{n.name}}.html">
        {{n.name}}
    </a>
{%- endfor %}
{%- endfor %}
{% endmacro %}

{% macro template_listing( node, display ) %}
{{ display( 'Namespaces', 'namespace', node ) }}
{{ display( 'Friends', 'friend', node ) }}
{{ display( 'Classes', 'class', node ) }}
{{ display( 'Types', 'typedef', node ) }}
{{ display( 'Constructors', 'constructor', node ) }}
{{ display( 'Destructor', 'destructor', node ) }}
{{ display( 'Methods', 'method', node ) }}
{{ display( 'Field', 'field', node ) }}
{{ display( 'Functions', 'function', node ) }}
{{ display( 'Variables', 'variable', node ) }}
{{ display( 'Unknowns', 'unknown', node ) }}
{% endmacro %}

{% macro standard_listing( node, title ) %}
<div class="col-10 align-self-stretch px-3">
{%- if node.kind == 'global' %}
  <h1>{{title}}</h1>
{%- else %}
  <h1>{{title}} {{node.name}}</h1>
{%- endif %}
{{ node.html }}
{{ brief_groups( node ) }}
{{ template_listing( node, brief_entries ) }}
<div class="my-5"></div>
</div>
{% endmacro %}

{% macro toc_listing( node, title ) %}
<div class="col-2 align-self-stretch">
<nav class="nav flex-column p-2">
{%- if node.kind == 'global' %}
  <div class="title">{{title}}</div>
{%- else %}
  <div><b>{{title}} {{node.name}}</b></div>
{%- endif %}
{{ toc_groups( node ) }}
{{ template_listing( node, toc_entries ) }}
</nav>
</div>
{% endmacro %}

